<html>

<body>
    <script>
        let n = +prompt("Введите N (порядок квадратной матрицы)");
        let M1 = matrix_a(n);
        let b = JSON.stringify(M1)
        let M2 = convMatrix(b, n);
        let M3 = add_zero(M1)
        let M4 = add_zero(M2)
        let M3_sum = sum(M3);
        let M4_sum = sum(M4);
        let M5;


        //матрица M1
        function matrix_a(n) {
            let arr = [];
            for (let i = 0; i < n; i++) {
                arr[i] = [];
                for (let j = 0; j < n; j++) {
                    arr[i][j] = Math.floor(Math.random() * 99) + 1;
                }
            } return arr;
        }

        //матрица M2
        function convMatrix(mas, n) {
            let arr_2 = mas.slice();
            let arr = [];
            while (arr_2.length) {
                arr.push(arr_2.splice(0, n));
            }
            return arr;
        }

        // матрица M3 и M4
        function add_zero(mas) {
            let arr = JSON.parse(JSON.stringify(mas))
            for (i = 0; i < n; i++) {
                for (j = 0; j < n; j++) {
                    if ((i + j) % 2 == 0) {
                        arr[i][j] = 0;
                    }
                }
            } return arr;
        }

        // Сумма элементов матрицы
        function sum(mas) {
            let sum = 0;
            for (let i = 0; i < n; i++) {
                for (let j = 0; j < n; j++) {
                    sum += mas[i][j]
                }
            } return sum;
        }

        // Сумма двух матриц
        function sum_matrix(mas, mas_2) {
            let arr = JSON.parse(JSON.stringify(mas))
            for (let i = 0; i < n; i++) {
                for (let j = 0; j < n; j++) {
                    arr[i][j] -= mas_2[i][j]
                }
            } return arr;
        }

        // Разность двух матриц
        function dif_matrix(mas, mas_2) {
            let arr = JSON.parse(JSON.stringify(mas))
            for (let i = 0; i < n; i++) {
                for (let j = 0; j < n; j++) {
                    arr[i][j] += mas_2[i][j]
                }
            } return arr;
        }

        console.log("Матрица M1:");
        console.log(M1);
        console.log(b);
        console.log("Матрица M2:");
        console.log(M2);
        console.log("Матрица M3:");
        console.log(M3);
        console.log("Матрица M4:");
        console.log(M4);
        console.log("Сумма элементов матрицы M3: " + M3_sum);
        console.log("Сумма элементов матрицы M4: " + M4_sum);

        if (M3_sum > M4_sum) {
            M5 = dif_matrix(M3, M4);
            console.log(M5);
        } else {
            M5 = sum_matrix(M3, M1);
            console.log(M5);
        }

        //Вывод M1
        document.write("<table border='1' width=20% height=20% align=center bgcolor=silver>>");
        document.write('<caption><h3>Матрица M2</h3></caption>');
        for (let i = 0; i < n; i++) {
            document.write("<tr>");
            for (let j = 0; j < n; j++) {
                document.write("<td align='center'>" + M2[i][j] + "</td>");
            }
        }

        //Вывод M5
        document.write("<table border='1' width=20% height=20% align=center bgcolor=silver>>");
        document.write('<caption><h3>Матрица M5</h3></caption>');
        for (let i = 0; i < n; i++) {
            document.write("<tr>");
            for (let j = 0; j < n; j++) {
                document.write("<td align='center'>" + M5[i][j] + "</td>");
            }
        }

    </script>
</body>

</html>